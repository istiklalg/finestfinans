from crispy_forms.bootstrap import StrictButton
from django import forms

from budget.mizan import M
from budget.models import Budget
from crispy_forms.helper import FormHelper
from crispy_forms.layout import Layout, Row, Column, Submit, Div


class AddBudget(forms.ModelForm):

    class Meta:
        model = Budget
        fields = (
            'period',
            'tax_number',
            'tax_title',
            'grup_ismi',
            'files',
            'L100',
            'L101',
            'L102',
            'L103',
            'L108',
            'L110',
            'L111',
            'L112',
            'L118',
            'L119',
            'L1201',
            'L1202',
            'L1203',
            'L121',
            'L122',
            'L126',
            'L127',
            'L128',
            'L129',
            'L131',
            'L132',
            'L133',
            'L135',
            'L136',
            'L137',
            'L138',
            'L139',
            'L150',
            'L151',
            'L152',
            'L153',
            'L157',
            'L158',
            'L159',
            'L170',
            'L171',
            'L178',
            'L180',
            'L181',
            'L190',
            'L191',
            'L192',
            'L193',
            'L194',
            'L195',
            'L196',
            'L197',
            'L198',
            'L199',
            'L200',
            'L201',
            'L210',
            'L211',
            'L2201',
            'L2202',
            'L221',
            'L222',
            'L226',
            'L228',
            'L229',
            'L231',
            'L232',
            'L233',
            'L235',
            'L236',
            'L237',
            'L239',
            'L240',
            'L241',
            'L242',
            'L243',
            'L244',
            'L245',
            'L246',
            'L247',
            'L248',
            'L249',
            'L250',
            'L251',
            'L252',
            'L253',
            'L254',
            'L255',
            'L256',
            'L257',
            'L258',
            'L259',
            'L260',
            'L261',
            'L262',
            'L263',
            'L264',
            'L267',
            'L268',
            'L269',
            'L271',
            'L272',
            'L277',
            'L278',
            'L279',
            'L280',
            'L281',
            'L291',
            'L292',
            'L293',
            'L294',
            'L295',
            'L296',
            'L297',
            'L298',
            'L299',
            'L300',
            'L301',
            'L302',
            'L303',
            'L304',
            'L305',
            'L306',
            'L308',
            'L309',
            'L3201',
            'L3202',
            'L321',
            'L322',
            'L326',
            'L329',
            'L331',
            'L332',
            'L333',
            'L335',
            'L336',
            'L337',
            'L338',
            'L340',
            'L349',
            'L350',
            'L351',
            'L358',
            'L360',
            'L361',
            'L368',
            'L369',
            'L370',
            'L371',
            'L372',
            'L373',
            'L379',
            'L380',
            'L381',
            'L391',
            'L392',
            'L393',
            'L394',
            'L397',
            'L399',
            'L400',
            'L401',
            'L402',
            'L405',
            'L407',
            'L408',
            'L409',
            'L410',
            'L420',
            'L421',
            'L422',
            'L426',
            'L429',
            'L431',
            'L432',
            'L433',
            'L436',
            'L437',
            'L438',
            'L440',
            'L449',
            'L472',
            'L479',
            'L480',
            'L481',
            'L492',
            'L493',
            'L496',
            'L499',
            'L500',
            'L501',
            'L502',
            'L503',
            'L520',
            'L521',
            'L522',
            'L523',
            'L525',
            'L526',
            'L527',
            'L529',
            'L540',
            'L541',
            'L542',
            'L543',
            'L548',
            'L549',
            'L551',
            'L560',
            'L561',
            'L562',
            'L563',
            'L570',
            'L580',
            'L590',
            'L591',
            'L600',
            'L601',
            'L602',
            'L603',
            'L604',
            'L610',
            'L611',
            'L612',
            'L620',
            'L621',
            'L622',
            'L623',
            'L624',
            'L625',
            'L626',
            'L627',
            'L628',
            'L630',
            'L631',
            'L632',
            'L633',
            'L634',
            'L640',
            'L641',
            'L642',
            'L643',
            'L644',
            'L645',
            'L646',
            'L647',
            'L648',
            'L649',
            'L653',
            'L654',
            'L655',
            'L656',
            'L657',
            'L658',
            'L659',
            'L660',
            'L661',
            'L671',
            'L677',
            'L678',
            'L679',
            'L680',
            'L681',
            'L687',
            'L688',
            'L689',
            'L690',
        )

    def __init__(self, *args, **kwargs):
        super(AddBudget, self).__init__(*args, **kwargs)
        self.helper = FormHelper()
        self.helper.form_name = 'budgetCreate'
        self.helper.form_id = 'new_budget'
        self.helper.form_class = 'form-horizontal'
        self.helper.form_method = 'POST'
        self.helper.form_action = 'submit'
        self.helper.label_class = 'col-lg-7'
        self.helper.field_class = 'col-lg-5'
        self.helper.layout = Layout(
                'period',
                'tax_number',
                'tax_title',
                'grup_ismi',
                'files',
                'L100',
                'L101',
                'L102',
                'L103',
                'L108',
                'L110',
                'L111',
                'L112',
                'L118',
                'L119',
                'L1201',
                'L1202',
                'L1203',
                'L121',
                'L122',
                'L126',
                'L127',
                'L128',
                'L129',
                'L131',
                'L132',
                'L133',
                'L135',
                'L136',
                'L137',
                'L138',
                'L139',
                'L150',
                'L151',
                'L152',
                'L153',
                'L157',
                'L158',
                'L159',
                'L170',
                'L171',
                'L178',
                'L180',
                'L181',
                'L190',
                'L191',
                'L192',
                'L193',
                'L194',
                'L195',
                'L196',
                'L197',
                'L198',
                'L199',
                'L200',
                'L201',
                'L210',
                'L211',
                'L2201',
                'L2202',
                'L221',
                'L222',
                'L226',
                'L228',
                'L229',
                'L231',
                'L232',
                'L233',
                'L235',
                'L236',
                'L237',
                'L239',
                'L240',
                'L241',
                'L242',
                'L243',
                'L244',
                'L245',
                'L246',
                'L247',
                'L248',
                'L249',
                'L250',
                'L251',
                'L252',
                'L253',
                'L254',
                'L255',
                'L256',
                'L257',
                'L258',
                'L259',
                'L260',
                'L261',
                'L262',
                'L263',
                'L264',
                'L267',
                'L268',
                'L269',
                'L271',
                'L272',
                'L277',
                'L278',
                'L279',
                'L280',
                'L281',
                'L291',
                'L292',
                'L293',
                'L294',
                'L295',
                'L296',
                'L297',
                'L298',
                'L299',
                'L300',
                'L301',
                'L302',
                'L303',
                'L304',
                'L305',
                'L306',
                'L308',
                'L309',
                'L3201',
                'L3202',
                'L321',
                'L322',
                'L326',
                'L329',
                'L331',
                'L332',
                'L333',
                'L335',
                'L336',
                'L337',
                'L338',
                'L340',
                'L349',
                'L350',
                'L351',
                'L358',
                'L360',
                'L361',
                'L368',
                'L369',
                'L370',
                'L371',
                'L372',
                'L373',
                'L379',
                'L380',
                'L381',
                'L391',
                'L392',
                'L393',
                'L394',
                'L397',
                'L399',
                'L400',
                'L401',
                'L402',
                'L405',
                'L407',
                'L408',
                'L409',
                'L410',
                'L420',
                'L421',
                'L422',
                'L426',
                'L429',
                'L431',
                'L432',
                'L433',
                'L436',
                'L437',
                'L438',
                'L440',
                'L449',
                'L472',
                'L479',
                'L480',
                'L481',
                'L492',
                'L493',
                'L496',
                'L499',
                'L500',
                'L501',
                'L502',
                'L503',
                'L520',
                'L521',
                'L522',
                'L523',
                'L525',
                'L526',
                'L527',
                'L529',
                'L540',
                'L541',
                'L542',
                'L543',
                'L548',
                'L549',
                'L551',
                'L560',
                'L561',
                'L562',
                'L563',
                'L570',
                'L580',
                'L590',
                'L591',
                'L600',
                'L601',
                'L602',
                'L603',
                'L604',
                'L610',
                'L611',
                'L612',
                'L620',
                'L621',
                'L622',
                'L623',
                'L624',
                'L625',
                'L626',
                'L627',
                'L628',
                'L630',
                'L631',
                'L632',
                'L633',
                'L634',
                'L640',
                'L641',
                'L642',
                'L643',
                'L644',
                'L645',
                'L646',
                'L647',
                'L648',
                'L649',
                'L653',
                'L654',
                'L655',
                'L656',
                'L657',
                'L658',
                'L659',
                'L660',
                'L661',
                'L671',
                'L677',
                'L678',
                'L679',
                'L680',
                'L681',
                'L687',
                'L688',
                'L689',
                'L690',
                StrictButton('KAYDET', css_class='btn-outline-info', type='submit'),
        )

    def clean(self):
        form = self.cleaned_data
        grup_ismi = self.cleaned_data.get('grup_ismi')
        files = self.cleaned_data.get('files')
        hesap100 = self.cleaned_data.get('L100')
        print(f'***** (form test ediliyor) Firma : {form["tax_title"]}, Grubu : {grup_ismi}')
        for k, v in form.items():
            if k == 'grup_ismi' or k == 'files':
                pass
            elif v is None:
                print(f'** {k} alanı içinen girilen değer {v}')
                p = k.replace('L', '')
                yer = M[p].upper()
                raise forms.ValidationError(f'{yer} hesabı için değer girmelisiniz! Yok ise 0 olarak bırakın')
        return form


class AddComments(forms.ModelForm):

    class Meta:
        model = Budget
        fields = (
            'company',
            'comment1', 'comment2', 'comment3', 'comment4', 'comment5', 'comment6',
            'comments',
            'advice',
        )

    def __init__(self, *args, **kwargs):
        super(AddComments, self).__init__(*args, **kwargs)
        self.helper = FormHelper()
        self.helper.form_class = 'form-vertical'
        self.helper.form_method = 'POST'
        self.helper.form_action = 'submit'
        self.helper.layout = Layout(
            'company',
            'comment1',
            'comment2',
            'comment3',
            'comment4',
            'comment5',
            'comment6',
            'comments',
            'advice',
            StrictButton('YORUMLARI KAYDET', css_class='btn-outline-info', type='submit'),
        )

